name: Daily Museum Generation

on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  generate-content:
    runs-on: ubuntu-latest
    steps:
      # --- SALONS (3 keer apart aanroepen) ---
      - name: Salon 1
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=salon -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
      
      - name: Wacht 10s
        run: sleep 10

      - name: Salon 2
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=salon -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
      
      - name: Wacht 10s
        run: sleep 10

      - name: Salon 3
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=salon -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"

      # --- TOURS (3 keer apart aanroepen) ---
      - name: Wacht 10s
        run: sleep 10

      - name: Tour 1
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=tour -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"

      - name: Wacht 10s
        run: sleep 10

      - name: Tour 2
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=tour -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"

      - name: Wacht 10s
        run: sleep 10

      - name: Tour 3
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=tour -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"

      # --- EXTRAS (3 keer apart aanroepen) ---
      - name: Wacht 10s
        run: sleep 10
      
      - name: Extras 1 (Focus & Game)
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=extras -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
      
      - name: Wacht 10s
        run: sleep 10

      - name: Extras 2 (Focus & Game)
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=extras -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
      
      - name: Wacht 10s
        run: sleep 10

      - name: Extras 3 (Focus & Game)
        run: curl -X GET ${{ secrets.VERCEL_APP_URL }}/api/cron/generate-daily?task=extras -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
